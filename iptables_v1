sudo vi /etc/sysctl.conf && uncoment net.ipv4.ip_forward=1
sudo sysctl --system #allow changes
sudo ufw disable #off ufw

iptables -A INPUT -p tcp --dport ssh -j ACCEPT #allow ssh conection
iptables -P INPUT DROP #drop input packets
iptables -P FORWARD DROP #drop forward packets
iptables -A INPUT -p icmp -j ACCEPT #allow icmp
iptables-save > /home/user/iptables.backup #save rules of iptables
or
Ubuntu:
sudo install iptables-persistent |yes|yes #save fules in /etc/iptables/rules.v4

iptables-restore < iptables.backup #restore backup
iptables -A INPUT -m state --state RELATED,ESTABLISHED -j ACCEPT #allow Established conections
iptables -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
iptables -t (table) filter -A FORWARD -p icmp -j ACCEPT #allow ping (filete default table)

iptables -t nat -A POSTROUTING -s 192.168.0.0/24 -j MASQUERADE #route ip 192... to 10..
iptables -t nat -L #see rules table NAT

iptables -A FORWARD -p tcp -m multiport --ports 53 -s 192.168.0.0/24 -j ACCEPT #allow DNS from 192.168.. subnet
iptables -A FORWARD -p udp -m multiport --ports 53 -s 192.168.0.0/24 -j ACCEPT #allow DNS from 192.168.. subnet


